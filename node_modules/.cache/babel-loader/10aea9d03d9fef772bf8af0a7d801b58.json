{"ast":null,"code":"import e from \"react\";\n\nfunction t(t) {\n  void 0 === t && (t = null);\n  var r = e.useState(t),\n      n = r[0],\n      u = r[1],\n      c = e.useRef({\n    current: n\n  }).current;\n  return Object.defineProperty(c, \"current\", {\n    get: function () {\n      return n;\n    },\n    set: function (e) {\n      Object.is(n, e) || (n = e, u(e));\n    }\n  }), c;\n}\n\nexport default t;","map":{"version":3,"sources":["../src/index.tsx"],"names":["useStatefulRef","initialVal","cur","setCur","React","useState","current","ref","useRef","Object","defineProperty","get","set","value","is"],"mappings":";;AAEA,SAASA,CAAT,CAA2BC,CAA3B,EAA2BA;AAAAA,OAAAA,CAAAA,KAAAA,CAAAA,KAAAA,CAAAA,GAAa,IAAbA;AAEzB,MAAA,CAAA,GAAoBG,CAAAA,CAAMC,QAAND,CAAyBH,CAAzBG,CAApB;AAAA,MAAKF,CAAAA,GAAAA,CAAAA,CAAAA,CAAAA,CAAL;AAAA,MAAUC,CAAAA,GAAAA,CAAAA,CAAAA,CAAAA,CAAV;AAAA,MAEiBI,CAAAA,GAAQH,CAAAA,CAAMI,MAANJ,CAAa;AACpCE,IAAAA,OAAAA,EAASJ;AAD2B,GAAbE,EAAjBE,OAFR;AAgBA,SAVAG,MAAAA,CAAOC,cAAPD,CAAsBF,CAAtBE,EAA2B,SAA3BA,EAAsC;AACpCE,IAAAA,GAAAA,EAAK,YAAA;AAAA,aAAMT,CAAN;AAAMA,KADyB;AAEpCU,IAAAA,GAAAA,EAAK,UAACC,CAAD,EAACA;AACCJ,MAAAA,MAAAA,CAAOK,EAAPL,CAAUP,CAAVO,EAAeI,CAAfJ,MACHP,CAAAA,GAAMW,CAANX,EACAC,CAAAA,CAAOU,CAAPV,CAFGM;AAEII;AALyB,GAAtCJ,GAUOF,CAAP;AAAOA;;AAAAA,eAAAA,CAAAA","sourcesContent":["import React from \"react\";\n\nfunction useStatefulRef<T>(initialVal = null) {\n  // eslint-disable-next-line prefer-const\n  let [cur, setCur] = React.useState<T | null>(initialVal);\n\n  const { current: ref } = React.useRef({\n    current: cur,\n  });\n\n  Object.defineProperty(ref, \"current\", {\n    get: () => cur as T,\n    set: (value: T) => {\n      if (!Object.is(cur, value)) {\n        cur = value;\n        setCur(value);\n      }\n    },\n  });\n\n  return ref as React.MutableRefObject<T>;\n}\n\nexport default useStatefulRef;\n"]},"metadata":{},"sourceType":"module"}