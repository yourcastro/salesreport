!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t.FetchHOC=e(t.React)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};return function(i,c){return function(u){return function(s){function a(){var t,r,u;e(this,a);for(var f=arguments.length,p=Array(f),l=0;f>l;l++)p[l]=arguments[l];return t=r=o(this,s.call.apply(s,[this].concat(p))),r.getUrl=function(){var t=i;return"function"==typeof i&&(t=i(r.props)),t},r.state={loading:!!r.getUrl(),success:void 0,error:void 0},r.prevUrl=r.getUrl(),r.componentDidMount=function(){r._isMounted=!0,r.fetchData(r.getUrl())},r.fetchData=function(t){if(t){r.setState(function(){return{loading:!0,success:void 0,error:void 0,response:void 0}});var e=n({credentials:"same-origin"},c),o=void 0;fetch(t,e).then(function(t){return o=t.clone(),t.text()}).then(function(t){try{t=JSON.parse(t)}catch(t){}r._isMounted&&r.setState(400>o.status||o.status>599?function(){return{data:t,loading:!1,success:!0,response:o}}:function(){return{data:t,error:Error(o.statusText),loading:!1,success:!1,response:o}})}).catch(function(t){r._isMounted&&r.setState(function(){return{error:t,loading:!1,success:!1,response:o}})})}},r.urlHasChanged=function(){if("function"!=typeof i)return r.prevUrl!==i;var t=i(r.props);return r.prevUrl!==t&&(r.prevUrl=t,!0)},u=t,o(r,u)}return r(a,s),a.prototype.componentDidUpdate=function(){"function"==typeof i&&this.urlHasChanged()&&this.fetchData(this.getUrl())},a.prototype.componentWillUnmount=function(){this._isMounted=!1},a.prototype.render=function(){return t.createElement(u,n({},this.props,this.state))},a}(t.Component)}}});
//# sourceMappingURL=fetch-hoc.min.js.map
